using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Malware : MonoBehaviour, IEnemy {

	public GameObject pointDisplay;
	public GameObject target;
	public GameObject spawnEffect;
	public GameObject explosionEffect;

	public int damage = 10;
	public int points = 10;
	public string type = "green";

	int state = 1;
	float speed = 1.0f;
	GameObject moveto;


	// Use this for initialization
	void Start () {
		//transform.position = new Vector3 (-3.21f, -10.28f, 9.9f);
		target = GameObject.FindGameObjectWithTag ("Target");
	}
	
	// Update is called once per frame
	void Update () {
		
	}
		
	public int Points () {
		return points;
	}

	public string GetEnemyType(){
		return type;
	}

	public void Die (){
		Instantiate (explosionEffect).transform.position = transform.position;

		Destroy (transform.parent.transform.parent.gameObject);
	}

	public void DealDamage() {
		((TargetBehavior)target.GetComponent (typeof(TargetBehavior))).Damage (damage);
	}

	public void DisplayPoints () {
		PointDisplay pointDisplayObject = Instantiate (pointDisplay).GetComponent<PointDisplay> ();
		pointDisplayObject.SetPoints (points);
		pointDisplayObject.SetPosition (transform.position);
	}

	void OnTriggerEnter(Collider other) {
		if (other.gameObject.tag == "Target") {
			DealDamage ();
			Die ();
		} 
	}
}
